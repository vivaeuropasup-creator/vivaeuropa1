#!/bin/bash

echo "=== ФИНАЛЬНАЯ ПРОВЕРКА СМЫСЛОВЫХ ОШИБОК ==="
echo ""

# 1. Проверяем исправленные ошибки
echo "1. ПРОВЕРКА ИСПРАВЛЕНИЙ:"
echo "------------------------"
echo "Фраза 'Получение готового ВНЖ и адаптацией' должна быть исправлена:"
grep -rn "Получение готового ВНЖ и адаптацией" *.html || echo "✅ Исправлено!"

echo ""
echo "Фраза 'этапах, этапах' должна быть исправлена:"
grep -rn "этапах, этапах" *.html || echo "✅ Исправлено!"

# 2. Проверяем другие возможные дубли
echo ""
echo "2. ДРУГИЕ ВОЗМОЖНЫЕ ДУБЛИ:"
echo "------------------------"
grep -rn "получения получения\|помощь помощь\|процесс процесс\|документы документы" *.html

# 3. Проверяем логическую связность предложений
echo ""
echo "3. ЛОГИЧЕСКАЯ СВЯЗНОСТЬ:"
echo "------------------------"
# Ищем предложения, где может быть нарушена логика
grep -rn "получаем.*получите\|мы получаем.*вы получаем\|получение.*получение" *.html

# 4. Проверяем правильность падежей в ключевых фразах
echo ""
echo "4. ПАДЕЖИ В КЛЮЧЕВЫХ ФРАЗАХ:"
echo "------------------------"
grep -rn "помощь в получении\|помощь с получением\|помощь по получению" *.html | head -5

# 5. Проверяем неправильные конструкции с предлогами
echo ""
echo "5. КОНСТРУКЦИИ С ПРЕДЛОГАМИ:"
echo "------------------------"
grep -rn "помощь в адаптация\|помощь с адаптация\|помощь по адаптация" *.html

echo ""
echo "6. ИТОГОВАЯ ПРОВЕРКА email адресов:"
echo "------------------------"
echo "Неправильные email (должно быть 0):"
grep -c "vivaeuropa.sup.com" *.html | grep -v ":0$" | wc -l

echo ""
echo "=== РЕЗУЛЬТАТ ==="
echo "Основная ошибка 'Получение готового ВНЖ и адаптацией' исправлена!"
echo "Дубль 'этапах, этапах' исправлен!"
echo "Проблемные символы в английских файлах исправлены!"
